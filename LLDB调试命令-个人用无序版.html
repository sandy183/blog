<!DOCTYPE HTML>
<html>
<head>
  <meta charset="utf-8">
  
  <title>LLDB调试命令-个人用无序版 | 撒金武的博客</title>
  <meta name="author" content="sandy">
  
  <meta name="description" content="这段文字会在哪儿出现呢，我想知道">
  
  
  <meta name="viewport" content="width=device-width,initial-scale=1,maximum-scale=1">

  <meta property="og:title" content="LLDB调试命令-个人用无序版">
  <meta property="og:site_name" content="撒金武的博客">

  
    <meta property="og:image" content="undefined">
  

  <link href="/favicon.png" rel="icon">
  <link rel="alternate" href="/atom.xml" title="撒金武的博客" type="application/atom+xml">
  <link rel="stylesheet" href="/css/style.css" media="screen" type="text/css">
  <!--[if lt IE 9]><script src="//html5shiv.googlecode.com/svn/trunk/html5.js"></script><![endif]-->
  <meta name="wumiiVerification" content="fb50a101-84fe-4ca2-91a7-ae8cf792978b">
  <link rel="icon" type="image/x-icon" href="/favicon.ico">
  <meta name="wumiiVerification" content="d73b5866-c390-4156-a4dd-51b526b5335e">
</head></html>
<body>
  <header id="header" class="inner"><div class="header-content">
	<div class="alignleft col-one">
		
			<img src="https://avatars3.githubusercontent.com/u/3953125?v=3&amp;s=460">
		
		<div class="header-div">
		    <h1><a href="/">撒金武的博客</a></h1>
		    <h2><a href="/">历经千辛万苦，踏遍万水千山，终于搭建起了自己的微博系统，&lt;p&gt;以后会将开发中的一些心得体会及看到的别人写的好的东西一并发上来，当笔记用，&lt;/p&gt;欢迎指正错误</a></h2>
		</div>
	</div>
	<div class="alignright col-two">
		
			<img src="/img/welcome.png">
		
	</div>
	<div class="clearfix"></div>
</div>

<div class="header-nav">
	<div id="main-nav" class="alignleft">
	    
	      <a href="/">首页</a>
	    
	      <a href="/collection">文集</a>
	    
	      <a href="/gallery">图集</a>
	    
	      <a href="/archives">归档</a>
	    
	      <a href="/categories">分类</a>
	    
	      <a href="/resume">关于我</a>
	    
	</div>
	<div id="sub-nav" class="alignright">
	    
	      <a href="/atom.xml">订阅</a>
	    
	      <a href="/customization">留言</a>
	    
	</div>
	<div class="clearfix"></div>
</div></header>
  
      <div id="content" class="inner">
  		<div id="main-col" class="alignleft"><div id="wrapper"><article class="page">
  
  <div class="post-content">
    <header>
        <div class="icon"></div>
        <time datetime="2015-11-13T03:10:20.000Z"><a href="/LLDB调试命令-个人用无序版.html">2015-11-13</a></time>
        <h1 class="title">LLDB调试命令-个人用无序版</h1>
    </header>
    <div class="entry">
      
        <div id="toc" class="toc-article">
	<div class="toc-title">目录</div>
	<ol class="toc"><li class="toc-item toc-level-5"><a class="toc-link" href="#bt_:_打印出最后一次调用堆栈信息"><span class="toc-text">bt : 打印出最后一次调用堆栈信息</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#set:设置临时断点"><span class="toc-text">set:设置临时断点</span></a></li></ol>
</div>
      
        <p>使用前提：<br>1.既然是调试命令，理所当然的，程序模式应该选择Debug模式。<br>2.在Debug模式下，如果你的程序在运行中崩溃（Crash）掉，那么恭喜你，使用lldb调试的机会来了。</p>
<h5 id="bt_:_打印出最后一次调用堆栈信息">bt : 打印出最后一次调用堆栈信息</h5><h5 id="set:设置临时断点">set:设置临时断点</h5><p>用法:</p>
<ul>
<li>如果想在<strong>某个文件中的某行</strong>设置一个断点，可使用以下命令:</li>
</ul>
<blockquote>
<p>(lldb) breakpoint set –file foo.c –line 12</p>
</blockquote>
<ul>
<li>如果想给某个<strong>函数</strong>设置断点，可使用以下命令：</li>
</ul>
<blockquote>
<p>(lldb) breakpoint set –name foo</p>
</blockquote>
<ul>
<li>如果想给<strong>C++</strong>中所有命名为foo的方法设置断点，可以使用以下命令：</li>
</ul>
<blockquote>
<p>(lldb) breakpoint set –method foo</p>
</blockquote>
<ul>
<li>如果想给<strong>Objective-C</strong>中所有命名为alignLeftEdges:的选择器设置断点，则可以使用以下命令：</li>
</ul>
<blockquote>
<p>(lldb) breakpoint set –selector alignLeftEdges:</p>
</blockquote>
<ul>
<li>我们可以使用<strong>—shlib</strong> 来将断点限定在一个特定的可执行库中：</li>
</ul>
<blockquote>
<p>(lldb) breakpoint set –shlib foo.dylib –name foo</p>
</blockquote>
<p>看吧，断点设置命令还是很强大的。</p>
<a id="more"></a>
<p>如果我们想查看程序中所有的断点，则可以使用breakpoint list命令，如下所示:</p>
<blockquote>
<p>(lldb) breakpoint list<br>Current breakpoints:<br>1: file = ‘../Business/MainView/controller/HomePageViewController.m’, line = 146, locations = 1, resolved = 1, hit count = 1<br>  1.1: where = Recruitment`-[HomePageViewController createTableView] + 495 at HomePageViewController.m:146, address = 0x000000010c4dccdf, resolved, hit count = 1 </p>
</blockquote>
<p>从上面的输出结果可以看出，一个断点一般有两部分：</p>
<p>1.断点的逻辑规范，这一部分是用户提供给breakpoint set命令的。<br>2.与规范匹配的断点的位置。</p>
<p>breakpoint list命令输出列表显示每个逻辑断点都有一个整数标识，如上所示断点标识为1。而每个位置也会有一个标识，如上所示的1.1<br> 不管是逻辑断点产生的所有位置，还是逻辑断点解析的任何特定位置，我们都可以使用断点触发命令来对其进行删除、禁用、设置条件或忽略计数操作。例如，如果我们想添加一个命令，以在LLDB命中断点1.1时打印跟踪栈，则可以执行以下命令:</p>
<blockquote>
<p>(lldb) breakpoint command add 1.1<br>Enter your debugger command(s). Type ‘DONE’ to end.<br>> bt<br>> DONE</p>
</blockquote>
<p>如果想更详细地了解”breakpoint command add”命令的使用，可以使用help帮助系统来查看</p>
<p>当然这里记了这么多，没什么乱用，因为真正会在终端下使用<strong>LLDB</strong>的人会看我的笔记？咱们还是看看<strong>Xcode</strong>里面怎么用吧</p>
<ul>
<li>打印-最实用的，<br>打印变量的值可以使用print命令，该命令如果打印的是简单类型，则会列出简单类型的类型和值。如果是对象，还会打印出对象指针地址，如下所示：</li>
</ul>
<blockquote>
<p>(lldb) print a<br>(NSInteger) $0 = 0<br>(lldb) print b<br>(NSInteger) $1 = 0<br>(lldb) print str<br>(NSString <em>) $2 = 0x0000000100001048 @”abc”<br>(lldb) print url<br>(NSURL </em>) $3 = 0x0000000100206cc0 @”abc”</p>
</blockquote>
<p>在输出结果中我们还能看到类似于\$0,\$1这样的符号，我们可以将其看作是指向对象的一个引用，我们在控制面板中可以直接使用这个符号来操作对应的对象，这些东西存在于LLDB的全名空间中，目的是为了辅助调试。如下所示:</p>
<blockquote>
<p>(lldb) exp $0 = 100 </p>
<p>(NSInteger) $9 = 100</p>
<p>(lldb) p a<br>(NSInteger) $10 = 100</p>
</blockquote>
<p>另外$后面的数值是递增的，每打印一个与对象相关的命令，这个值都会加1<br>上面的print命令会打印出对象的很多信息，如果我们只想查看对象的值的信息，则可以使用po(print object的缩写)命令，如下所示：</p>
<blockquote>
<p>(lldb)po str<br>abc</p>
</blockquote>
<p>当然，po命令是”exp -O —“命令的别名，使用”exp -O —”能达到同样的效果<br>对于简单类型，我们还可以为其指定不同的打印格式，其命令格式是print/，如下所示：</p>
<blockquote>
<p>(lldb) p/x a<br>(NSInteger) $13 = 0x0000000000000064</p>
</blockquote>
<p>格式的完整清单可以参考<a href="https://sourceware.org/gdb/onlinedocs/gdb/Output-Formats.html" target="_blank" rel="external">Output Formats</a></p>
<ul>
<li>expression</li>
</ul>
<p>在开发中，我们经常会遇到这样一种情况：我们设置一个视图的背景颜色，运行后发现颜色不好看。嗯，好吧，在代码里面修改一下，再编译运行一下，嗯，还是不好看，然后再修改吧～～这样无形中浪费了我们大把的时间。在这种情况下，expression命令强大的功能就能体现出来了，它不仅会改变调试器中的值，还改变了程序中的实际值。我们先来看看实际效果，如下所示:</p>
<blockquote>
<p>(lldb) exp a = 10<br>(NSInteger) $0 = 10</p>
<p>(lldb) exp b = 100<br>(NSInteger) $1 = 100<br>2015-01-25 14:00:41.313 test[18064:71466] a + b = 110, abc</p>
</blockquote>
<p>expression命令的功能不仅于此，正如上面的po命令，其实际也是”expression -O —“命令的别名。更详细使用可以参考<a href="https://developer.apple.com/library/mac/documentation/IDEs/Conceptual/gdb_to_lldb_transition_guide/document/lldb-command-examples.html#//apple_ref/doc/uid/TP40012917-CH3-SW5" target="_blank" rel="external">Evaluating Expressions</a>.</p>
<ul>
<li>image(并非图片)</li>
</ul>
<p>image命令的用法也挺多，首先可以用它来查看工程中使用的库，如下所示：</p>
<blockquote>
<p>(lldb) image list<br>[  0] 432A6EBF-B9D2-3850-BCB2-821B9E62B1E0 0x0000000100000000 /Users/**/Library/Developer/Xcode/DerivedData/test-byjqwkhxixddxudlnvqhrfughkra/Build/Products/Debug/test<br>[  1] 65DCCB06-339C-3E25-9702-600A28291D0E 0x00007fff5fc00000 /usr/lib/dyld<br>[  2] E3746EDD-DFB1-3ECB-88ED-A91AC0EF3AAA 0x00007fff8d324000 /System/Library/Frameworks/Foundation.framework/Versions/C/Foundation<br>[  3] 759E155D-BC42-3D4E-869B-6F57D477177C 0x00007fff8869f000 /usr/lib/libobjc.A.dylib<br>[  4] 5C161F1A-93BA-3221-A31D-F86222005B1B 0x00007fff8c75c000 /usr/lib/libSystem.B.dylib<br>[  5] CBD1591C-405E-376E-87E9-B264610EBF49 0x00007fff8df0d000 /System/Library/Frameworks/CoreFoundation.framework/Versions/A/CoreFoundation<br>[  6] A260789B-D4D8-316A-9490-254767B8A5F1 0x00007fff8de36000 /usr/lib/libauto.dylib </p>
</blockquote>
<p>我们还可以用它来查找可执行文件或共享库的原始地址，这一点还是很有用的，当我们的程序崩溃时，我们可以使用这条命令来查找崩溃所在的具体位置，如下所示：</p>
<blockquote>
<p>NSArray *array = @[@1, @2];<br>NSLog(@”item 3: %@”, array[2]);</p>
</blockquote>
<p>这段代码在运行后会抛出如下异常：</p>
<blockquote>
<p>2015-01-25 14:12:01.007 test[18122:76474] <strong><em> Terminating app due to uncaught exception ‘NSRangeException’, reason: ‘</em></strong> -[<strong>NSArrayI objectAtIndex:]: index 2 beyond bounds [0 .. 1]’<br><em>*</em> First throw call stack:<br>(<br> 0   CoreFoundation                      0x00007fff8e06f66c </strong>exceptionPreprocess + 172<br>1   libobjc.A.dylib                     0x00007fff886ad76e objc_exception_throw + 43<br>2   CoreFoundation                      0x00007fff8df487de -[__NSArrayI objectAtIndex:] + 190<br>3   test                                0x0000000100000de0 main + 384<br> 4   libdyld.dylib                       0x00007fff8f1b65c9 start + 1<br>)<br>libc++abi.dylib: terminating with uncaught exception of type NSException</p>
</blockquote>
<p>根据以上信息，我们可以判断崩溃位置是在main.m文件中，要想知道具体在哪一行，可以使用以下命令：</p>
<blockquote>
<p>(lldb) image lookup –address 0x0000000100000de0<br> Address: test[0x0000000100000de0] (test.<strong>TEXT.</strong>text + 384)<br>Summary: test`main + 384 at main.m:23</p>
</blockquote>
<p>可以看到，最后定位到了main.m文件的第23行，正是我们代码所在的位置。<br>我们还可以使用image lookup命令来查看具体的类型，如下所示:</p>
<blockquote>
<p>(lldb) image lookup –type NSURL<br>Best match found in /Users/<em>*/Library/Developer/Xcode/DerivedData/test-byjqwkhxixddxudlnvqhrfughkra/Build/Products/Debug/test:<br>id = {0x100000157}, name = “NSURL”, byte-size = 40, decl = NSURL.h:17, clang_type = “@interface NSURL : NSObject{<br>NSString </em> _urlString;<br>NSURL <em> _baseURL;<br>void </em> _clients;<br>void <em> _reserved;<br>}<br>@property ( readonly,getter = absoluteString,setter = <null selector="">,nonatomic ) NSString </null></em> absoluteString;<br>@property ( readonly,getter = relativeString,setter = <null selector="">,nonatomic ) NSString <em> relativeString;<br>@property ( readonly,getter = baseURL,setter = <null selector="">,nonatomic ) NSURL </null></em> baseURL;<br>@property ( readonly,getter = absoluteURL,setter = <null selector="">,nonatomic ) NSURL <em> absoluteURL;<br>@property ( readonly,getter = scheme,setter = <null selector="">,nonatomic ) NSString </null></em> scheme;<br>@property ( readonly,getter = resourceSpecifier,setter = <null selector="">,nonatomic ) NSString <em> resourceSpecifier;<br>@property ( readonly,getter = host,setter = <null selector="">,nonatomic ) NSString </null></em> host;<br>@property ( readonly,getter = port,setter = <null selector="">,nonatomic ) NSNumber <em> port;<br>@property ( readonly,getter = user,setter = <null selector="">,nonatomic ) NSString </null></em> user;<br>@property ( readonly,getter = password,setter = <null selector="">,nonatomic ) NSString <em> password;<br>@property ( readonly,getter = path,setter = <null selector="">,nonatomic ) NSString </null></em> path;<br>@property ( readonly,getter = fragment,setter = <null selector="">,nonatomic ) NSString <em> fragment;<br>@property ( readonly,getter = parameterString,setter = <null selector="">,nonatomic ) NSString </null></em> parameterString;<br>@property ( readonly,getter = query,setter = <null selector="">,nonatomic ) NSString <em> query;<br>@property ( readonly,getter = relativePath,setter = <null selector="">,nonatomic ) NSString </null></em> relativePath;<br>@property ( readonly,getter = fileSystemRepresentation,setter = <null selector=""> ) const char <em> fileSystemRepresentation;<br>@property ( readonly,getter = isFileURL,setter = <null selector="">,readwrite ) BOOL fileURL;<br>@property ( readonly,getter = standardizedURL,setter = <null selector="">,nonatomic ) NSURL </null></null></em> standardizedURL;<br>@property ( readonly,getter = filePathURL,setter = <null selector="">,nonatomic ) NSURL * filePathURL;<br>@end”</null></null></null></null></null></null></null></null></null></p>
</blockquote>
<p>可以看到，输出结果中列出了NSURL的一些成员变量及属性信息。<br>image命令还有许多其它功能，具体可以参考<a href="https://developer.apple.com/library/mac/documentation/IDEs/Conceptual/gdb_to_lldb_transition_guide/document/lldb-command-examples.html#//apple_ref/doc/uid/TP40012917-CH3-SW5" target="_blank" rel="external">Executable and Shared Library Query Commands</a>;</p>
<p>LLDB 还有很多功能，暂时没有研究就记这么多吧！</p>
<p>参考资料：</p>
<p>[1] <a href="http://lldb.llvm.org/tutorial.html" target="_blank" rel="external">The LLDB Debugger</a></p>
<p>[2]<a href="https://developer.apple.com/library/mac/documentation/IDEs/Conceptual/gdb_to_lldb_transition_guide/document/Introduction.html" target="_blank" rel="external">LLDB Quick Start Guide</a></p>
<p>[3]<a href="http://www.cocoachina.com/ios/20141219/10709.html" target="_blank" rel="external">与调试器共舞 – LLDB 的华尔兹</a></p>
<p>[4]<a href="http://www.starfelix.com/blog/2014/03/17/lldbdiao-shi-ming-ling-chu-tan/" target="_blank" rel="external">LLDB调试命令初探</a></p>
<p>[5]<a href="http://www.cocoachina.com/ios/20140530/8619.html" target="_blank" rel="external">NSLog效率低下的原因及尝试lldb断点打印Log</a></p>
<p>[6]<a href="http://www.cocoachina.com/ios/20150126/11021.html" target="_blank" rel="external">浅谈LLDB调试器</a></p>
      
    </div>
    <footer>
<!--        -->
        <div class="categories">
    <a href="/undefined">undefined</a>
  </div>
        <div class="tags">
    <a href="/undefined">undefined</a>, <a href="/undefined">undefined</a>
  </div>
        <div class="bdsharebuttonbox"><a href="#" class="bds_more" data-cmd="more"></a><a title="分享到QQ空间" href="#" class="bds_qzone" data-cmd="qzone"></a><a title="分享到新浪微博" href="#" class="bds_tsina" data-cmd="tsina"></a><a title="分享到腾讯微博" href="#" class="bds_tqq" data-cmd="tqq"></a><a title="分享到人人网" href="#" class="bds_renren" data-cmd="renren"></a><a title="分享到微信" href="#" class="bds_weixin" data-cmd="weixin"></a></div>
  <script>window._bd_share_config={"common":{"bdSnsKey":{},"bdText":"","bdMini":"2","bdMiniList":false,"bdPic":"","bdStyle":"1","bdSize":"16"},"share":{},"image":{"viewList":["qzone","tsina","tqq","renren","weixin"],"viewText":"分享到：","viewSize":"16"},"selectShare":{"bdContainerClass":null,"bdSelectMiniList":["qzone","tsina","tqq","renren","weixin"]}};with(document)0[(getElementsByTagName('head')[0]||body).appendChild(createElement('script')).src='http://bdimg.share.baidu.com/static/api/js/share.js?v=89860593.js?cdnversion='+~(-new Date()/36e5)];</script>
<!--        -->
      <div class="clearfix"></div>
    </footer>
  </div>
</article>
<section id="relate">
	<script type="text/javascript" id="wumiiRelatedItems"></script>
	<script type="text/javascript">
	    var wumiiPermaLink = "http://sajinwu.github.io/LLDB调试命令-个人用无序版.html"; //请用代码生成文章永久的链接
	    var wumiiTitle = "LLDB调试命令-个人用无序版"; //请用代码生成文章标题
	    var wumiiTags = "iOS,随笔"; //请用代码生成文章标签，以英文逗号分隔，如："标签1,标签2"
	    var wumiiCategories = "开发"; //请用代码生成文章分类，分类名放在 JSONArray 	中，如: ["分类1", "分类2"]
	    var wumiiSitePrefix = "http://sandy183.github.io/";
	    var wumiiParams = "&num=6&mode=3&pf=JAVASCRIPT";
	</script>
	<script type="text/javascript" src="http://widget.wumii.cn/ext/relatedItemsWidget"></script>
	<a href="http://www.wumii.com/widget/relatedItems" style="border:0">
	    <img src="http://static.wumii.cn/images/pixel.png" alt="无觅关联推荐，快速提升流量" style="border:0;padding:0;margin:0">
	</a>
</section>
<section id="comment">
<!--   <h1 class="title">留言</h1> -->


    <!-- 多说评论框 start -->
<div class="ds-thread" data-thread-key="LLDB调试命令-个人用无序版.html" data-title="LLDB调试命令-个人用无序版" data-url="http://sajinwu.github.io/LLDB调试命令-个人用无序版.html"></div>
<!-- 多说评论框 end -->
<!-- 多说公共JS代码 start (一个网页只需插入一次) -->
<script type="text/javascript">
var duoshuoQuery = {short_name:"sajinwu"};
  (function() {
    var ds = document.createElement('script');
    ds.type = 'text/javascript';ds.async = true;
    ds.src = (document.location.protocol == 'https:' ? 'https:' : 'http:') + '//static.duoshuo.com/embed.js';
    ds.charset = 'UTF-8';
    (document.getElementsByTagName('head')[0] 
     || document.getElementsByTagName('body')[0]).appendChild(ds);
  })();
  </script>
<!-- 多说公共JS代码 end -->
  
</section></div></div>
  		<aside id="sidebar" class="alignright"><div class="search">
  <form action="//google.com/search" method="get" accept-charset="utf-8">
    <input type="search" name="q" results="0" placeholder="搜索">
    <input type="hidden" name="q" value="site:sajinwu.github.io">
  </form>
</div>

  

  

  

  <div class="widget">
    <h3 class="title">我的微博</h3>
      <ul class="weibo">
	<iframe width="100%" height="600" class="share_self" frameborder="0" scrolling="no" src="http://widget.weibo.com/weiboshow/index.php?language=&amp;width=0&amp;height=600&amp;fansRow=2&amp;ptype=1&amp;speed=0&amp;skin=3&amp;isTitle=1&amp;noborder=1&amp;isWeibo=1&amp;isFans=1&amp;uid=3291113350&amp;verifier=10955587&amp;dpc=1"></iframe>
      </ul>
  </div></aside>
           <div class="clearfix"></div>
      </div>
  	
   <footer id="footer" class="inner"><div class="alignleft">
  
  &copy; 2015 sandy
  
  <a href="https://github.com/pengloo53/Hexo-theme-light_cn">Hexo theme</a>
</div>
<div class="alignright" style="font-style: italic">
	Powered by <a href="http://hexo.io/" target="_blank">Hexo</a>
</div>
<div class="clearfix"></div></footer>
  <script src="http://libs.baidu.com/jquery/2.1.1/jquery.min.js"></script>
<script src="/js/jquery.imagesloaded.min.js"></script>
<script src="/js/gallery.js"></script>

<script>
var _hmt = _hmt || [];
(function() {
  var hm = document.createElement("script");
  hm.src = "//hm.baidu.com/hm.js?d87c2bbed124837a661a1a1ff8232b20";
  var s = document.getElementsByTagName("script")[0]; 
  s.parentNode.insertBefore(hm, s);
})();
</script>
<div id="toTop">
	<a href="#">▲</a>
	<a href="#footer">▼</a>
</div>
<!--  -->
</body>
